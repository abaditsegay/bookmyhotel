# Application Configuration

server.port=8080
server.address=0.0.0.0

server.servlet.context-path=/managemyhotel
spring.application.name=bookmyhotel-backend

# Server Configuration
server.max-http-request-header-size=32KB
server.tomcat.max-http-form-post-size=50MB

# Database Configuration
spring.datasource.url=${DATABASE_URL:jdbc:mysql://localhost:3307/bookmyhotel?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true}
spring.datasource.username=${DATABASE_USERNAME:root}
spring.datasource.password=${DATABASE_PASSWORD:password}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=true

# Flyway Configuration
spring.flyway.enabled=false
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# JWT Configuration
# CRITICAL: Change JWT_SECRET_KEY in production! Use a cryptographically secure random key
jwt.secret.key=${JWT_SECRET_KEY:bookmyhotelverylongsecretkeythatisatleast512bitslongforsecuritywithjwtandhs512algorithmthisisasupersecurekey2024bookmyhotelapp}
jwt.expiration.time=${JWT_EXPIRATION_TIME:86400000}
jwt.refresh.expiration.time=${JWT_REFRESH_EXPIRATION_TIME:604800000}
jwt.issuer=${JWT_ISSUER:bookmyhotel-backend}

# Security Configuration
security.jwt.cookie-name=__Secure-JWT-Token
security.jwt.cookie-secure=true
security.jwt.cookie-http-only=true
security.jwt.cookie-same-site=strict

# Session Management Configuration
security.session.timeout.minutes=30
security.session.max-concurrent=5
security.session.cleanup.interval.minutes=5

# Password Security Configuration
security.password.min-length=8
security.password.max-length=128
security.password.require-uppercase=true
security.password.require-lowercase=true
security.password.require-digits=true
security.password.require-special-chars=true

# Stripe Configuration
# CRITICAL: Set STRIPE_API_KEY and STRIPE_WEBHOOK_SECRET in production!
stripe.api.key=${STRIPE_API_KEY:sk_test_your_stripe_secret_key}
stripe.webhook.secret=${STRIPE_WEBHOOK_SECRET:whsec_your_webhook_secret}

# Ethiopian Mobile Payment Configuration
# M-birr Configuration
mbirr.api.base-url=${MBIRR_API_BASE_URL:https://api.mbirr.et}
mbirr.api.key=${MBIRR_API_KEY:your_mbirr_api_key}
mbirr.api.secret=${MBIRR_API_SECRET:your_mbirr_api_secret}
mbirr.merchant.id=${MBIRR_MERCHANT_ID:your_mbirr_merchant_id}
mbirr.merchant.code=${MBIRR_MERCHANT_CODE:your_mbirr_merchant_code}
mbirr.webhook.secret=${MBIRR_WEBHOOK_SECRET:your_mbirr_webhook_secret}
mbirr.payment.timeout=900

# Telebirr Configuration
telebirr.api.base-url=${TELEBIRR_API_BASE_URL:https://api.telebirr.et}
telebirr.api.key=${TELEBIRR_API_KEY:your_telebirr_api_key}
telebirr.api.secret=${TELEBIRR_API_SECRET:your_telebirr_api_secret}
telebirr.merchant.id=${TELEBIRR_MERCHANT_ID:your_telebirr_merchant_id}
telebirr.merchant.code=${TELEBIRR_MERCHANT_CODE:your_telebirr_merchant_code}
telebirr.webhook.secret=${TELEBIRR_WEBHOOK_SECRET:your_telebirr_webhook_secret}
telebirr.payment.timeout=900

# Ethiopian Payment General Settings
ethiopian.payment.currency=ETB
ethiopian.payment.country=ET
ethiopian.payment.return-url=${app.url}/booking-confirmation
ethiopian.payment.cancel-url=${app.url}/booking-failed

# Logging Configuration
logging.level.com.bookmyhotel=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%X{tenantId}] %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%X{tenantId}] %logger{36} - %msg%n

# Spring Cache Configuration (In-Memory)
spring.cache.type=simple

# Actuator Configuration
management.endpoints.web.exposure.include=health,metrics,prometheus,caches
management.endpoint.health.show-details=when-authorized
management.prometheus.metrics.export.enabled=true

# CORS Configuration
app.cors.allowed-origins=http://localhost:3000,http://192.168.1.230:3000,https://shegeroom.com,https://www.shegeroom.com
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true

# Email Configuration - OAuth2 Microsoft Graph
# Use default values for development to avoid startup errors  
microsoft.graph.client-id=${MICROSOFT_GRAPH_CLIENT_ID:your-client-id}
microsoft.graph.tenant-id=${MICROSOFT_GRAPH_TENANT_ID:your-tenant-id}
microsoft.graph.client-secret=${MICROSOFT_GRAPH_CLIENT_SECRET:your-client-secret}
microsoft.graph.scopes=https://graph.microsoft.com/.default

# Application Settings
app.name=BookMyHotel
app.url=http://localhost:3000
app.email.from=noreply@shegeroom.com
